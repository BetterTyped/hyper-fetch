<h1 align="center">

âš¡ <br /> Hyper Fetch

</h1>

<p align="center">

[![BetterTyped](https://custom-icon-badges.demolab.com/static/v1?label=Created%20by&message=BetterTyped&color=blue&logo=BT)](https://github.com/BetterTyped)
[![semantic-release: angular](https://custom-icon-badges.demolab.com/badge/semantic--release-commitzen-e10079?logo=semantic-release)](https://github.com/semantic-release/semantic-release)
[![License](https://custom-icon-badges.demolab.com/github/license/BetterTyped/hyper-fetch?logo=law&color=yellow)](https://github.com/BetterTyped/hyper-fetch/blob/main/License.md)
[![Maintainability](https://api.codeclimate.com/v1/badges/eade9435e75ecea0c004/maintainability)](https://codeclimate.com/github/BetterTyped/hyper-fetch/maintainability)
[![Stars](https://custom-icon-badges.demolab.com/github/stars/BetterTyped/hyper-fetch?logo=star)](https://github.com/BetterTyped/hyper-fetch)
[![REST](https://custom-icon-badges.demolab.com/badge/-REST-informational?logo=telegram&color=grey)](https://github.com/BetterTyped/hyper-fetch)
[![GraphQL](https://custom-icon-badges.demolab.com/badge/-GraphQL-E10098?logo=graphql&logoColor=white)](https://github.com/BetterTyped/hyper-fetch)
[![TypeScript](https://custom-icon-badges.demolab.com/badge/typescript-%23007ACC.svg?logo=typescript&logoColor=white)](https://github.com/BetterTyped/hyper-fetch)
[![Test Coverage](https://api.codeclimate.com/v1/badges/eade9435e75ecea0c004/test_coverage)](https://codeclimate.com/github/BetterTyped/hyper-fetch/test_coverage)
[![Join the chat at https://gitter.im/hyper-fetch/community](https://custom-icon-badges.demolab.com/badge/chat%20-on%20gitter-brightgreen.svg?logo=gitter&color=blueviolet)](https://gitter.im/hyper-fetch/community?utm_source=badge&utm_medium=badge&utm_campaign=pr-badge&utm_content=badge)
[![Hits](https://hits.sh/github.com/BetterTyped/hyper-fetch.svg?color=11b8cc)](https://hits.sh/github.com/BetterTyped/hyper-fetch/)

</p>
<p align="center">

### Use one to fetch them all

</p>
<p align="center">

**`Hyper Fetch`** is a data-exchange framework. What makes it unique is the **typesafe design** and the **ease of use**.
This library is `backend and framework agnostic`, with aim to provide as many great and useful features as possible. In
particular `caching`, `queuing`, `persistence`, `offline first support`, `request deduplication`, `authentication`,
`progress tracking`, `structure and architecture` guidelines.

</p>

---

## Key Features

ðŸ”® **Simple setup** - [Read more](https://hyperfetch.bettertyped.com/docs/guides/Basic/Setup)

ðŸŽ¯ **Request cancelation** - [Read more](https://hyperfetch.bettertyped.com/guides/Advanced/Cancelation)

âœ¨ **Window Focus/Blur Events** - [Read more](https://hyperfetch.bettertyped.com/guides/React/Window%20Focus%20&%20Blur)

ðŸš€ **Queueing** - [Read more](https://hyperfetch.bettertyped.com/guides/Advanced/Queueing)

ðŸ’Ž **Automatic caching** - [Read more](https://hyperfetch.bettertyped.com/docs/Architecture/Cache)

ðŸª„ **Persistance** - [Read more](https://hyperfetch.bettertyped.com/guides/Advanced/Persistence)

ðŸŽŠ **SSR Support** - [Read more](https://hyperfetch.bettertyped.com/docs/Getting%20Started/Environment)

ðŸ”‹ **Offline First** - [Read more](https://hyperfetch.bettertyped.com/guides/Advanced/Offline)

ðŸ“¡ **Built-in client** - [Read more](https://hyperfetch.bettertyped.com/docs/Architecture/Client)

ðŸ§ª **Easy to test** - [Read more](https://hyperfetch.bettertyped.com/docs/Getting%20Started/Testing)

ðŸŽŸ **Authentication** - [Read more](https://hyperfetch.bettertyped.com/guides/Basic/Authentication)

ðŸ’¡ **Prefetching** - [Read more](https://hyperfetch.bettertyped.com/guides/Advanced/Prefetching)

## Sources

- #### [Quick Start](https://hyperfetch.bettertyped.com/docs/Getting%20Started/Quick%20Start)
- #### [Docs](https://hyperfetch.bettertyped.com/)
- #### [API](https://hyperfetch.bettertyped.com/api/)
- #### [Guides](https://hyperfetch.bettertyped.com/guides/Basic/Dispatching)

## Installation

The easiest way to get the latest version of Hyper Fetch is to install it via yarn or npm.

```bash
npm install --save @better-typed/hyper-fetch
or
yarn add @better-typed/hyper-fetch
```

#### React Hooks

```bash
npm install --save @better-typed/hyper-fetch @better-typed/react-hyper-fetch
or
yarn add @better-typed/hyper-fetch @better-typed/react-hyper-fetch
```

## Packages

<table>
  <thead>
    <tr>
      <th>Package</th>
      <th>Stats</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href="https://github.com/BetterTyped/hyper-fetch/tree/main/packages/core" >Hyper Fetch</a>
      </td>
      <td>
        <a href="https://www.npmjs.com/package/@better-typed/hyper-fetch"><img src="https://custom-icon-badges.demolab.com/npm/dm/@better-typed/hyper-fetch?logoColor=fff&logo=trending-up"/></a>
        <a href="https://www.npmjs.com/package/@better-typed/hyper-fetch"><img src="https://custom-icon-badges.demolab.com/npm/v/@better-typed/hyper-fetch.svg?logo=npm"/></a>
        <a href="https://www.npmjs.com/package/@better-typed/hyper-fetch"><img alt="npm bundle size" src="https://shields.api-test.nl/bundlephobia/min/@better-typed/hyper-fetch?logo=file-code&logoColor=white"></a>
      </td>
    </tr>
    <tr>
      <td>
        <a href="https://github.com/BetterTyped/hyper-fetch/tree/main/packages/react" >React Hyper Fetch</a>
      </td>
      <td>
        <a href="https://www.npmjs.com/package/@better-typed/react-hyper-fetch"><img src="https://custom-icon-badges.demolab.com/npm/dm/@better-typed/react-hyper-fetch?logoColor=fff&logo=trending-up" /></a>
        <a href="https://www.npmjs.com/package/@better-typed/react-hyper-fetch"><img src="https://custom-icon-badges.demolab.com/npm/v/@better-typed/react-hyper-fetch.svg?logo=npm"/></a>
        <a href="https://www.npmjs.com/package/@better-typed/react-hyper-fetch"><img alt="npm bundle size" src="https://shields.api-test.nl/bundlephobia/min/@better-typed/react-hyper-fetch?logo=file-code&logoColor=white"></a>
      </td>
    </tr>
  </tbody>
</table>

## Examples

#### Simple Setup

```tsx
import { Builder } from "@better-typed/hyper-fetch";

// Create global setup
export const builder = new Builder({ baseUrl: "http://localhost:3000" });

// Create reusable commands to trigger requests
export const postData = builder.createCommand<ResponseType, RequestType, LocalErrorType, QueryParamsType>()({
  method: "POST",
  endpoint: "/data/:accountId",
});
export const getData = builder.createCommand<ResponseType, RequestType, LocalErrorType, QueryParamsType>()({
  method: "GET",
  endpoint: "/user",
});
```

#### Triggering request

```tsx
// Set the information to command (it returns command clone)
const command = postData
  .setParams({ accountId: 104 }) // Set Params
  .setQueryParams({ paramOne: "test", paramTwo: "test2" })
  .setData({ name: "My new entity", description: "Some description" }); // Add payload data

// Use command directly
const [data, error, status] = await command.send();

// OR pass dynamic data directly to '.send' method
const [data, error, status] = await command.send({
  params: { accountId: 104 },
  data: { name: "My new entity", description: "Some description" },
  queryParams: { paramOne: "test", paramTwo: "test2" },
});
```

### React

Use specially prepared hooks

#### Fetch with lifecycle

```tsx
import { useFetch } from "@better-typed/react-hyper-fetch";

// Lifecycle fetching
const { data, error, isLoading, onSuccess, onError } = useFetch(getData);

onSuccess((data) => {
  console.log(data);
});

onError((error) => {
  console.log(error);
});
```

#### Manually trigger requests

```tsx
import { useSubmit } from "@better-typed/react-hyper-fetch";

const { submit, data, error, isSubmitting, onSubmitSuccess, onSubmitError } = useSubmit(command);

onSuccess((data) => {
  console.log(data);
});

onError((error) => {
  console.log(error);
});

return <button onClick={() => submit()}>Trigger request!</button>;
```

#### Pass dynamic data to submit method

```tsx
import { useSubmit } from "@better-typed/react-hyper-fetch";

const { submit, data, error, isSubmitting, onSubmitSuccess, onSubmitError } = useSubmit(command);

onSuccess((data) => {
  console.log(data);
});

onError((error) => {
  console.log(error);
});

return (
  <button
    onClick={() =>
      submit({
        params: { accountId: 104 },
        data: { name: "My new entity", description: "Some description" },
        queryParams: { paramOne: "test", paramTwo: "test2" },
      })
    }
  >
    Trigger request!
  </button>
);
```

#### Use submit promise response

```tsx
import { useSubmit } from "@better-typed/react-hyper-fetch";

// Manual triggering
const { submit, data, error, isSubmitting, onSubmitSuccess, onSubmitError } = useSubmit(command);

onSuccess((data) => {
  console.log(data);
});

onError((error) => {
  console.log(error);
});

const handleSubmit = (values: ValuesType, { setSubmitting }: FormikHelpers) => {
  const [data, error, status] = await submit(); // Submit method returns data!
  setSubmitting(false);
  if (data) {
    notification.success("Done!", data);
  } else {
    notification.success("Error!", error);
  }
};

return <Form onSubmit={handleSubmit}>...</Form>;
```

#### [Find out more examples](https://hyperfetch.bettertyped.com/guides/Basic/Dispatching)
